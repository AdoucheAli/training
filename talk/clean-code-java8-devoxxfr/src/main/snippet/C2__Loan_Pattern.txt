interface OrderRepo extends JpaRepository<Order, Long> { // J'aime Spring Data!
Stream<Order> findByActiveTrue(); // 1 Mln orders ;)`


class FileExporter {
private OrderRepo repo;
		
private String toExportLine(Order order) {
return "Order " + order.getId() + "\n";`
	
public File exportFile(String fileName) {
File file = new File("export/" + fileName);
try (Writer writer = new FileWriter(file)) {
writer.write("Header\n");
repo.findByA$
	.map(this::toE$)
.forEach(writer::write);
log.debug("Done");
return file;
} catch (Exception e) {
log.debug("Coucou!", e); // TERREUR !
// TODO send email notification
throw e;`
