CREATE TABLE COMPANY
(
	ID    INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	NAME  VARCHAR(50)
)
;


CREATE TABLE EMP_PRJ
(
	EMPLOYEE_ID  INTEGER NOT NULL,
	PROJECT_ID   INTEGER NOT NULL
)
;


CREATE TABLE EMPLOYEE
(
	ID          INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	NAME        VARCHAR(50),
	COMPANY_ID  INTEGER,
	SITE_ID     INTEGER,
	VERSION     BIGINT,
	DISCRIMINATOR VARCHAR(50)
)
;


CREATE TABLE EMPLOYEE_DETAILS
(
	ID                INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	EMPLOYEE_ID       INTEGER NOT NULL,
	EMPLOYEMENT_DATE  DATE
)
;


CREATE TABLE PROJECT
(
	ID          INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	NAME        VARCHAR(50),
	TYPE        INTEGER NOT NULL,
	MANAGER_ID  INTEGER
)
;


CREATE TABLE SITE
(
	ID          INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	NAME        VARCHAR(50),
	COMPANY_ID  INTEGER
)
;



ALTER TABLE COMPANY ADD CONSTRAINT PK_COMPANY 
	PRIMARY KEY (ID)
;

ALTER TABLE EMP_PRJ ADD CONSTRAINT PK_EMP_PRJ 
	PRIMARY KEY (EMPLOYEE_ID, PROJECT_ID)
;

ALTER TABLE EMPLOYEE ADD CONSTRAINT PK_EMPLOYEE 
	PRIMARY KEY (ID)
;

ALTER TABLE EMPLOYEE_DETAILS ADD CONSTRAINT PK_EMPLOYEE_DETAILS 
	PRIMARY KEY (ID)
;

ALTER TABLE PROJECT ADD CONSTRAINT PK_PROJECT 
	PRIMARY KEY (ID)
;

ALTER TABLE SITE ADD CONSTRAINT PK_SITE 
	PRIMARY KEY (ID)
;



ALTER TABLE EMP_PRJ ADD CONSTRAINT FK_EMP_PRJ_EMPLOYEE 
	FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE (ID)
;

ALTER TABLE EMP_PRJ ADD CONSTRAINT FK_EMP_PRJ_PROJECT 
	FOREIGN KEY (PROJECT_ID) REFERENCES PROJECT (ID)
;

ALTER TABLE EMPLOYEE ADD CONSTRAINT FK_EMPLOYEE_COMPANY 
	FOREIGN KEY (COMPANY_ID) REFERENCES COMPANY (ID)
;

ALTER TABLE EMPLOYEE ADD CONSTRAINT FK_EMPLOYEE_SITE 
	FOREIGN KEY (SITE_ID) REFERENCES SITE (ID)
;

ALTER TABLE EMPLOYEE_DETAILS ADD CONSTRAINT FK_EMPLOYEE_DETAILS_EMPLOYEE 
	FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE (ID)
;

ALTER TABLE PROJECT ADD CONSTRAINT FK_PROJECT_EMPLOYEE 
	FOREIGN KEY (MANAGER_ID) REFERENCES EMPLOYEE (ID)
;

ALTER TABLE SITE ADD CONSTRAINT FK_SITE_COMPANY 
	FOREIGN KEY (COMPANY_ID) REFERENCES COMPANY (ID)
;







-- COURSE DATABASE

CREATE TABLE COURSE
(
	ID          INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	NAME        VARCHAR(50),
	TEACHER_ID  INTEGER,
	ROOM_ID     INTEGER
)
;


CREATE TABLE COURSE_STUDENT
(
	COURSE_ID   INTEGER NOT NULL,
	STUDENT_ID  INTEGER NOT NULL
)
;


CREATE TABLE ROOM
(
	ID    INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	TYPE  VARCHAR(50)
)
;


CREATE TABLE STUDENT
(
	ID          INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	NAME        VARCHAR(50),
	HISTORY_ID  INTEGER
)
;


CREATE TABLE STUDENT_HISTORY
(
	ID          INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	START_DATE  DATE
)
;


CREATE TABLE TEACHER
(
	ID    INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
	NAME  VARCHAR(50)
)
;



ALTER TABLE COURSE ADD CONSTRAINT PK_COURSE 
	PRIMARY KEY (ID)
;

ALTER TABLE COURSE_STUDENT ADD CONSTRAINT PK_COURSE_STUDENT 
	PRIMARY KEY (COURSE_ID, STUDENT_ID)
;

ALTER TABLE ROOM ADD CONSTRAINT PK_ROOM 
	PRIMARY KEY (ID)
;

ALTER TABLE STUDENT ADD CONSTRAINT PK_STUDENT 
	PRIMARY KEY (ID)
;

ALTER TABLE STUDENT_HISTORY ADD CONSTRAINT PK_COURSE_DETAILS 
	PRIMARY KEY (ID)
;

ALTER TABLE TEACHER ADD CONSTRAINT PK_TEACHER 
	PRIMARY KEY (ID)
;



ALTER TABLE COURSE ADD CONSTRAINT FK_COURSE_ROOM 
	FOREIGN KEY (ROOM_ID) REFERENCES ROOM (ID)
;

ALTER TABLE COURSE ADD CONSTRAINT FK_COURSE_TEACHER 
	FOREIGN KEY (TEACHER_ID) REFERENCES TEACHER (ID)
;

ALTER TABLE COURSE_STUDENT ADD CONSTRAINT FK_COURSE_STUDENT_COURSE 
	FOREIGN KEY (COURSE_ID) REFERENCES COURSE (ID)
;

ALTER TABLE COURSE_STUDENT ADD CONSTRAINT FK_COURSE_STUDENT_STUDENT 
	FOREIGN KEY (STUDENT_ID) REFERENCES STUDENT (ID)
;

ALTER TABLE STUDENT ADD CONSTRAINT FK_STUDENT_STUDENT_HISTORY 
	FOREIGN KEY (HISTORY_ID) REFERENCES STUDENT_HISTORY (ID)
;
